---
type Props = {
  src: PictureData;
  alt: string;
  className?: string;
  width?: number | string;
  height?: number | string;
  sizes: string;
};

const { src, alt, className, width, height, sizes } = Astro.props;

const avifSrcset = src.sources.avif.map((i) => i.src + ` ${i.w}w`).join(", ");
const webpSrcset = src.sources.webp.map((i) => i.src + ` ${i.w}w`).join(", ");
---

<picture>
  <source type="image/avif" srcset={avifSrcset} {sizes} />
  <source type="image/webp" srcset={webpSrcset} {sizes} />
  <img
    src={src.img.src}
    width={width ?? src.img.w}
    height={height ?? src.img.h}
    class={className}
    alt={alt}
  />
</picture>
